<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Unit Converter PWA ft. Boots!</title>
   <link rel="manifest" href="manifest.json">
   <meta name="theme-color" content="#f59e0b">
   <meta name="apple-mobile-web-app-capable" content="yes">
   <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
   <meta name="apple-mobile-web-app-title" content="UnitConv">
   <link rel="apple-touch-icon" href="icons/icon-192x192.png">
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
   <style>
       body {
           font-family: 'Inter', sans-serif;
           background-color: #f0f4f8; /* Light background */
           overscroll-behavior: none;
       }

       #quoteBox {
           background-color: #fffbe6; /* Very light yellow */
           border-left: 4px solid #f59e0b; /* Amber border */
           color: #78350f; /* Darker amber text */
           transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
           opacity: 0;
           transform: translateY(-20px);
       }

       #quoteBox.show {
           opacity: 1;
           transform: translateY(0);
       }

       #confetti-container {
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           pointer-events: none;
           overflow: hidden;
           z-index: 9999;
       }

       .confetti {
           position: absolute;
           width: 12px; /* Slightly larger confetti */
           height: 12px;
           background-color: #facc15;
           opacity: 0;
           animation: fall 3s ease-out forwards;
       }

       @keyframes fall {
           0% {
               opacity: 1;
               transform: translateY(-10vh) rotateZ(0deg);
           }
           100% {
               opacity: 0;
               transform: translateY(110vh) rotateZ(720deg);
           }
       }

       .header-animation {
           animation: pulse 2s infinite, colorChange 5s infinite alternate;
       }
       @keyframes pulse {
           0% { transform: scale(1); }
           50% { transform: scale(1.1); }
           100% { transform: scale(1); }
       }
       @keyframes colorChange {
           from { color: #3b82f6; }  /* Blue */
           to { color: #f59e0b; }    /* Amber */
       }

       .container-animation {
            animation: fadeIn 1s ease-out, slideIn 0.5s ease-out;
       }
       @keyframes fadeIn {
           from {
               opacity: 0;
           }
           to{
               opacity: 1;
           }
       }
       @keyframes slideIn {
           from {
               transform: translateY(20px);
           }
           to {
               transform: translateY(0);
           }
       }

       /* Boots Animation Styles */
       #boots-running {
           position: absolute;
           top: 100px; /* Moved to the top */
           left: calc(50% - 25px); /* Centered horizontally */
           width: 50px;
           height: auto;
           transition: transform 0.7s ease-in-out; /* More complex animation */
           z-index: 10;
           transform: translateX(-200px) scale(1.2); /* Start off-screen and larger */
       }

       #boots-running.running {
           transform: translateX(0) scale(1.2); /* Slide in and maintain size */
       }

       #boots-celebrate {
           position: absolute;
           bottom: 20px;
           left: calc(50% - 25px);
           width: 50px;
           height: auto;
           opacity: 0;
           transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out; /* Add transform */
           z-index: 10;
           transform: scale(0.8); /* Start smaller */
       }

       #boots-celebrate.show {
           opacity: 1;
           transform: scale(1); /* Scale up on show */
       }

       .colorful-button {
           background-image: linear-gradient(to right, #6366f1, #a855f7, #f9a8d4); /* Gradient */
           color: white;
           padding: 14px 28px;
           border: none;
           border-radius: 10px;
           box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
           transition: all 0.3s ease;
           font-size: 1.1em;
           display: inline-flex;
           align-items: center;
           justify-content: center;
           width: 200px;
       }

       .colorful-button:hover {
           background-image: linear-gradient(to right, #4338ca, #7e22ce, #e07eda);
           box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
           transform: translateY(-2px);
       }

       .colorful-button:active {
           background-image: linear-gradient(to right, #4c1d95, #6b0f93, #c81e87);
           box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
           transform: translateY(0);
       }

       .input-container {
           background-color: white;
           padding: 16px;
           border-radius: 10px;
           box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
           margin-bottom: 20px;
       }

       .input-label {
           display: block;
           font-size: 1.1em;
           font-weight: 500;
           color: #4f46e5; /* Indigo */
           margin-bottom: 8px;
           text-shadow: 1px 1px 0px #e0e7ff;
       }

       .unit-select {
           width: calc(100% - 32px);
           padding: 12px;
           border-radius: 6px;
           border: 1px solid #d1d5db;
           font-size: 1em;
           transition: border-color 0.3s ease, box-shadow 0.3s ease;
           outline: none;
           margin-bottom: 10px;
       }

       .unit-select:focus {
           border-color: #a7f3d0; /* Teal focus */
           box-shadow: 0 0 0 3px rgba(162, 241, 212, 0.2);
       }

       .value-input {
           width: calc(100% - 32px);
           padding: 12px;
           border-radius: 6px;
           border: 1px solid #d1d5db;
           font-size: 1em;
           transition: border-color 0.3s ease, box-shadow 0.3s ease;
           outline: none;
       }

       .value-input:focus {
           border-color: #a7f3d0; /* Teal focus */
           box-shadow: 0 0 0 3px rgba(162, 241, 212, 0.2);
       }

       #resultArea {
           text-align: center;
           font-size: 1.4em;
           font-weight: 600;
           color: #1e40af; /* Darker blue */
           margin-top: 20px;
           min-height: 36px;
           letter-spacing: 1px;
           text-shadow: 1px 1px 2px #f5f5f5;
       }

   </style>
</head>
<body class="bg-gray-100">
   <div id="confetti-container"></div>

   <div class="container-animation flex flex-col items-center justify-start min-h-screen pt-16 pb-8 px-4 relative">
       <h1 class="header-animation text-3xl font-bold text-center mb-8">
           Unit Converter ft. Boots!
       </h1>
       <div id="boots-running" class="absolute">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path fill="none" stroke="#000" stroke-width="2" d="M25 5a20 20 0 1 0 0 40 20 20 0 0 0 0-40z"/><path fill="#f6d045" stroke="#ed8b01" stroke-width="2" d="M37.1 27.5c.8-1.5.2-3.2-1.3-4-.9-.5-2.1-.2-2.7.7-.5.7-.2 1.9.7 2.4 1.2.7 2.8.2 3.3-1.1z"/><path fill="#f6d045" stroke="#ed8b01" stroke-width="2" d="M12.9 27.5c-.8-1.5-.2-3.2 1.3-4 .9-.5 2.1-.2 2.7.7.5.7.2 1.9-.7 2.4-1.2.7-2.8.2-3.3-1.1z"/><path fill="#ed8b01" d="M25 12.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5z"/><path fill="#ed8b01" d="M15 35a2 2 0 1 0 4 0 2 2 0 0 0-4 0z"/><path fill="#ed8b01" d="M35 35a2 2 0 1 0 4 0 2 2 0 0 0-4 0z"/></svg>
       </div>

       <div class="input-container w-full max-w-md">
           <div class="mb-4">
               <label for="conversionType" class="input-label">
                   Conversion Type:
               </label>
               <select id="conversionType" name="conversionType" class="unit-select">
                   <option value="length">Length</option>
                   <option value="temperature">Temperature</option>
                   <option value="area">Area</option>
                   <option value="volume">Volume</option>
                   <option value="mass">Mass</option>
                   <option value="speed">Speed</option>
               </select>
           </div>

           <div class="mb-4 grid grid-cols-2 gap-4">
               <div>
                   <label for="fromUnit" class="input-label">From:</label>
                   <select id="fromUnit" name="fromUnit" class="unit-select">
                   </select>
               </div>
               <div>
                   <label for="toUnit" class="input-label">To:</label>
                   <select id="toUnit" name="toUnit" class="unit-select">
                   </select>
               </div>
           </div>

           <div class="mb-4">
               <label for="inputValue" class="input-label">Value:</label>
               <input type="number" id="inputValue" name="inputValue" placeholder="Enter value" class="value-input">
           </div>

           <div class="text-center mb-6">
               <button id="convertButton" class="colorful-button">
                   <span id="convertButtonText">Convert!</span>
               </button>
           </div>

           <div id="resultArea" class="">
           </div>
       </div>

       <div id="quoteBox" class="p-4 rounded-md text-center italic">
           <p id="quoteText"></p>
           <p class="font-semibold mt-2">- Boots</p>
       </div>
       <div id="boots-celebrate" class="absolute">
           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path fill="none" stroke="#000" stroke-width="2" d="M25 5a20 20 0 1 0 0 40 20 20 0 0 0 0-40z"/><path fill="#f6d045" stroke="#ed8b01" stroke-width="2" d="M37.1 27.5c.8-1.5.2-3.2-1.3-4-.9-.5-2.1-.2-2.7.7-.5.7-.2 1.9.7 2.4 1.2.7 2.8.2 3.3-1.1z"/><path fill="#f6d045" stroke="#ed8b01" stroke-width="2" d="M12.9 27.5c-.8-1.5-.2-3.2 1.3-4 .9-.5 2.1-.2 2.7.7.5.7.2 1.9-.7 2.4-1.2.7-2.8.2-3.3-1.1z"/><path fill="#ed8b01" d="M25 12.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5z"/><path fill="#ed8b01" d="M15 35a2 2 0 1 0 4 0 2 2 0 0 0-4 0z"/><path fill="#ed8b01" d="M35 35a2 2 0 1 0 4 0 2 2 0 0 0-4 0z"/><path fill="#ed8b01" d="M25 40.5a3 3 0 0 1-3-3v-7a3 3 0 0 1 6 0v7a3 3 0 0 1-3 3z"/><path fill="#ed8b01" d="M10 25a3 3 0 0 1 3-3h4a3 3 0 0 1 0 6h-4a3 3 0 0 1-3-3z"/><path fill="#ed8b01" d="M37 25a3 3 0 0 1 3-3h4a3 3 0 0 1 0 6h-4a3 3 0 0 1-3-3z"/></svg>
       </div>
   </div>

   <script>
       const conversionTypeSelect = document.getElementById('conversionType');
       const inputValue = document.getElementById('inputValue');
       const fromUnitSelect = document.getElementById('fromUnit');
       const toUnitSelect = document.getElementById('toUnit');
       const convertButton = document.getElementById('convertButton');
       const convertButtonText = document.getElementById('convertButtonText');
       const resultArea = document.getElementById('resultArea');
       const quoteBox = document.getElementById('quoteBox');
       const quoteText = document.getElementById('quoteText');
       const confettiContainer = document.getElementById('confetti-container');
       const bootsRunning = document.getElementById('boots-running');
       const bootsCelebrate = document.getElementById('boots-celebrate');


       const bootsQuotes = [
           "Swiper, no swiping!", "Ooh-ooh, ah-ah!", "Bananas!", "¡Delicioso!",
           "We did it, we did it!", "I need my boots!", "A star! A star!",
           "Can *you* see the Grumpy Old Troll?", "Let's go, vámonos!", "Map! Map! Map!",
           "Did *you* see that blue arrow?", "Backpack! Backpack!",
           "Yummy, yummy, yummy in my tummy, tummy, tummy!"
       ];

       const units = {
           length: {
               meter: { name: 'Meter', factor: 1 }, kilometer: { name: 'Kilometer', factor: 0.001 },
               centimeter: { name: 'Centimeter', factor: 100 }, millimeter: { name: 'Millimeter', factor: 1000 },
               mile: { name: 'Mile', factor: 0.000621371 }, foot: { name: 'Foot', factor: 3.28084 },
               inch: { name: 'Inch', factor: 39.3701 }
           },
           temperature: {
               celsius: { name: 'Celsius' }, fahrenheit: { name: 'Fahrenheit' }, kelvin: { name: 'Kelvin' }
           },
           area: {
               squaremeter: { name: 'Square Meter', factor: 1 }, squarekilometer: { name: 'Square Kilometer', factor: 0.000001 },
               squarecentimeter: { name: 'Square Centimeter', factor: 10000 }, squaremillimeter: { name: 'Square Millimeter', factor: 1000000 },
               squaremile: { name: 'Square Mile', factor: 3.86102e-7 }, squarefoot: { name: 'Square Foot', factor: 10.7639 },
               squareinch: { name: 'Square Inch', factor: 1550 }, hectare: { name: 'Hectare', factor: 0.0001 },
               acre: { name: 'Acre', factor: 0.000247105 },
           },
           volume: {
               cubicmeter: { name: 'Cubic Meter', factor: 1 }, cubickilometer: { name: 'Cubic Kilometer', factor: 1e-9 },
               cubiccentimeter: { name: 'Cubic Centimeter', factor: 1e6 }, cubicmillimeter: { name: 'Cubic Millimeter', factor: 1e9 },
               liter: { name: 'Liter', factor: 1000 }, milliliter: { name: 'Milliliter', factor: 1e6 },
               gallon: { name: 'Gallon (US)', factor: 264.172 }, quart: { name: 'Quart (US)', factor: 1056.69 },
               pint: { name: 'Pint (US)', factor: 2113.38 }, fluidounce: { name: 'Fluid Ounce (US)', factor: 33814 },
               cubicfoot: { name: 'Cubic Foot', factor: 35.3147 }, cubicinch: { name: 'Cubic Inch', factor: 61023.7 },
           },
           mass: {
               kilogram: { name: 'Kilogram', factor: 1 }, gram: { name: 'Gram', factor: 1000 },
               milligram: { name: 'Milligram', factor: 1e6 }, metricton: { name: 'Metric Ton', factor: 0.001 },
               pound: { name: 'Pound', factor: 2.20462 }, ounce: { name: 'Ounce', factor: 35.274 },
           },
           speed: {
               meterspersecond: { name: 'Meters per Second', factor: 1 },
               kilometerperhour: { name: 'Kilometer per Hour', factor: 3.6 },
               milesperhour: { name: 'Miles per Hour', factor: 2.23694 },
               knots: { name: 'Knots', factor: 1.94384 },
               feetpersecond: { name: 'Feet per Second', factor: 3.28084 },
           },
       };

       function populateUnits() {
           const selectedType = conversionTypeSelect.value;
           const unitOptions = units[selectedType];

           fromUnitSelect.innerHTML = '';
           toUnitSelect.innerHTML = '';

           for (const key in unitOptions) {
               const optionFrom = document.createElement('option');
               optionFrom.value = key;
               optionFrom.textContent = unitOptions[key].name;
               fromUnitSelect.appendChild(optionFrom);

               const optionTo = document.createElement('option');
               optionTo.value = key;
               optionTo.textContent = unitOptions[key].name;
               toUnitSelect.appendChild(optionTo);
           }

           if (fromUnitSelect.options.length > 1) {
               toUnitSelect.selectedIndex = 1;
           }
       }

       function convert() {
           const value = parseFloat(inputValue.value);
           const fromUnit = fromUnitSelect.value;
           const toUnit = toUnitSelect.value;
           const type = conversionTypeSelect.value;

           resultArea.textContent = '';
           quoteBox.classList.remove('show');
           bootsCelebrate.classList.remove('show');


           if (isNaN(value)) {
               resultArea.textContent = 'Please enter a valid number.';
               return;
           }

           let result;

           try {
               // --- Boots Animation Start ---
               bootsRunning.classList.add('running');
               convertButtonText.textContent = '';
               convertButton.disabled = true;
               setTimeout(() => {
                   bootsRunning.classList.remove('running');
                   convertButtonText.textContent = 'Convert!';
                   convertButton.disabled = false;
               }, 700);

               // --- Conversion and Display ---
               if (type === 'length' || type === 'area' || type === 'volume' || type === 'mass' || type === 'speed') {
                   const fromFactor = units[type][fromUnit].factor;
                   const toFactor = units[type][toUnit].factor;
                   result = (value / fromFactor) * toFactor;
               } else if (type === 'temperature') {
                   result = convertTemperature(value, fromUnit, toUnit);
               }
                setTimeout(()=> {
                   resultArea.textContent = `${value} ${units[type][fromUnit].name} = ${result.toFixed(4)} ${units[type][toUnit].name}`;
                }, 700);

               // --- Boots Animation End ---
               setTimeout(() => {
                   displayRandomQuote();
                   triggerConfetti();
                   bootsCelebrate.classList.add('show');
               }, 700);

           } catch (error) {
               console.error("Conversion error:", error);
               resultArea.textContent = 'Conversion failed. Check units.';
           }
       }

       function convertTemperature(value, from, to) {
           if (from === to) return value;

           let celsiusValue;
           if (from === 'celsius') {
               celsiusValue = value;
           } else if (from === 'fahrenheit') {
               celsiusValue = (value - 32) * 5 / 9;
           } else if (from === 'kelvin') {
               celsiusValue = value - 273.15;
           } else {
               throw new Error("Invalid 'from' temperature unit");
           }

           if (to === 'celsius') {
               return celsiusValue;
           } else if (to === 'fahrenheit') {
               return (celsiusValue * 9 / 5) + 32;
           } else if (to === 'kelvin') {
               return celsiusValue + 273.15;
           } else {
               throw new Error("Invalid 'to' temperature unit");
           }
       }

       function displayRandomQuote() {
           const randomIndex = Math.floor(Math.random() * bootsQuotes.length);
           quoteText.textContent = bootsQuotes[randomIndex];
           quoteBox.classList.add('show');
       }

       function triggerConfetti() {
           const colors = ['#facc15', '#fb923c', '#60a5fa', '#a78bfa', '#f87171'];
           const numConfetti = 50;

           for (let i = 0; i < numConfetti; i++) {
               const confetti = document.createElement('div');
               confetti.classList.add('confetti');

               confetti.style.left = Math.random() * 100 + 'vw';
               confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
               const size = Math.random() * 10 + 8;
               confetti.style.width = size + 'px';
               confetti.style.height = size + 'px';
               confetti.style.animationDelay = Math.random() * 0.5 + 's';
               confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';

               if (Math.random() > 0.7) {
                   confetti.style.borderRadius = '50%';
               } else if (Math.random() > 0.4) {
                   confetti.style.height = (size * 1.5) + 'px';
               }

               confettiContainer.appendChild(confetti);

               confetti.addEventListener('animationend', () => {
                   confetti.remove();
               });
           }
       }

       conversionTypeSelect.addEventListener('change', populateUnits);
       convertButton.addEventListener('click', convert);
       inputValue.addEventListener('keypress', function (event) {
           if (event.key === 'Enter') {
               convert();
           }
       });

       if ('serviceWorker' in navigator) {
           window.addEventListener('load', () => {
               navigator.serviceWorker.register('/sw.js')
                   .then(registration => {
                       console.log('ServiceWorker registration successful with scope: ', registration.scope);
                   })
                   .catch(error => {
                       console.log('ServiceWorker registration failed: ', error);
                   });
           });
       }

       populateUnits();

   </script>
</body>
</html>
